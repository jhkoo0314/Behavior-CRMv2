<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ìƒì„¸ ê³„ì‚° ë¡œì§ - BehaviorCRM</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
          "Noto Sans KR", sans-serif;
        line-height: 1.6;
        color: #333;
        background: #f7fafc;
        padding: 40px 20px;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        padding: 60px;
      }
      .header {
        text-align: center;
        margin-bottom: 50px;
        padding-bottom: 30px;
        border-bottom: 3px solid #ed8936;
      }
      h1 {
        font-size: 2.5em;
        color: #2d3748;
        margin-bottom: 15px;
      }
      .back-link {
        display: inline-block;
        margin-top: 20px;
        color: #ed8936;
        text-decoration: none;
        font-weight: 600;
      }
      .back-link:hover {
        text-decoration: underline;
      }
      .section {
        margin-bottom: 60px;
        padding: 40px;
        background: #f7fafc;
        border-radius: 15px;
        border-left: 5px solid #ed8936;
      }
      .code-block {
        background: #2d3748;
        color: #e2e8f0;
        padding: 25px;
        border-radius: 10px;
        font-family: "Courier New", monospace;
        margin: 20px 0;
        overflow-x: auto;
        font-size: 0.95em;
        line-height: 1.8;
      }
      .code-block code {
        white-space: pre-wrap;
      }
      .step-box {
        background: white;
        padding: 20px;
        border-radius: 10px;
        margin: 15px 0;
        border-left: 4px solid #ed8936;
      }
      .step-box h4 {
        color: #ed8936;
        margin-bottom: 10px;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
      }
      th,
      td {
        padding: 15px;
        text-align: left;
        border-bottom: 1px solid #e2e8f0;
      }
      th {
        background: #ed8936;
        color: white;
        font-weight: 600;
      }
      tr:hover {
        background: #f7fafc;
      }
      .algorithm-flow {
        background: white;
        padding: 30px;
        border-radius: 10px;
        margin: 20px 0;
      }
      .flow-step {
        padding: 15px;
        margin: 10px 0;
        background: #edf2f7;
        border-radius: 5px;
        border-left: 3px solid #ed8936;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>ğŸ”¬ ìƒì„¸ ê³„ì‚° ë¡œì§</h1>
        <p class="subtitle">ê° ì§€í‘œì˜ ìˆ˜í•™ì  ê³µì‹ ë° ì•Œê³ ë¦¬ì¦˜ ìƒì„¸ ì„¤ëª…</p>
        <a href="index.html" class="back-link">â† ëª©ì°¨ë¡œ ëŒì•„ê°€ê¸°</a>
      </div>

      <!-- HIR ìƒì„¸ ê³„ì‚° -->
      <div class="section">
        <h2 style="color: #2d3748; margin-bottom: 20px">
          HIR (High-Impact Rate) ìƒì„¸ ê³„ì‚° ë¡œì§
        </h2>

        <div class="algorithm-flow">
          <h3>ì•Œê³ ë¦¬ì¦˜ íë¦„</h3>
          <div class="flow-step">
            <strong>1ë‹¨ê³„: ë°ì´í„° ì¡°íšŒ</strong>
            <p>ìµœê·¼ 30ì¼ê°„ì˜ behavior_scores í…Œì´ë¸”ì—ì„œ ì‚¬ìš©ìë³„ ë°ì´í„° ì¡°íšŒ</p>
          </div>
          <div class="flow-step">
            <strong>2ë‹¨ê³„: Behavior íƒ€ì…ë³„ ì ìˆ˜ ì¶”ì¶œ</strong>
            <p>
              8ê°œ Behavior íƒ€ì… (Call, Visit, Email, Presentation ë“±)ë³„ë¡œ ê°€ì¥
              ìµœê·¼ quality_score ì¶”ì¶œ
            </p>
          </div>
          <div class="flow-step">
            <strong>3ë‹¨ê³„: í‰ê·  ê³„ì‚°</strong>
            <p>ì¶”ì¶œëœ quality_scoreë“¤ì˜ ì‚°ìˆ  í‰ê·  ê³„ì‚°</p>
          </div>
          <div class="flow-step">
            <strong>4ë‹¨ê³„: ì •ê·œí™”</strong>
            <p>0-100 ìŠ¤ì¼€ì¼ë¡œ ì •ê·œí™” (ì´ë¯¸ 0-100 ë²”ìœ„ì´ë¯€ë¡œ ê·¸ëŒ€ë¡œ ì‚¬ìš©)</p>
          </div>
        </div>

        <h3 style="margin-top: 30px; color: #2d3748">ì½”ë“œ ë¡œì§</h3>
        <div class="code-block">
          <code
            >// 1. Behavior Score ì¡°íšŒ const behaviorScores = await
            getBehaviorScoresForPeriod( userId, periodStart, periodEnd ); // 2.
            ê° Behavior íƒ€ì…ë³„ quality_score ì¶”ì¶œ const qualityScores: number[]
            = []; for (const behaviorType of BEHAVIOR_TYPE_LIST) { const
            scoresForType = behaviorScores .filter((bs) => bs.behavior ===
            behaviorType) .sort((a, b) => new Date(b.period_start).getTime() -
            new Date(a.period_start).getTime() ); if (scoresForType.length > 0)
            { qualityScores.push(scoresForType[0].quality_score); } } // 3. í‰ê· 
            ê³„ì‚° const avgQualityScore = qualityScores.reduce( (sum, score) =>
            sum + score, 0 ) / qualityScores.length; // 4. ì •ê·œí™” const hirScore
            = Math.round( Math.min(100, Math.max(0, avgQualityScore)) );</code
          >
        </div>

        <h3 style="margin-top: 30px; color: #2d3748">ìˆ˜í•™ì  ê³µì‹</h3>
        <div class="code-block">
          <code
            >HIR = (1/n) Ã— Î£(Q_i) ì—¬ê¸°ì„œ: - n = Behavior íƒ€ì… ìˆ˜ (8ê°œ) - Q_i =
            ië²ˆì§¸ Behavior íƒ€ì…ì˜ ê°€ì¥ ìµœê·¼ quality_score - ë²”ìœ„: 0 â‰¤ HIR â‰¤
            100</code
          >
        </div>
      </div>

      <!-- RTR ìƒì„¸ ê³„ì‚° -->
      <div class="section">
        <h2 style="color: #2d3748; margin-bottom: 20px">
          RTR (Relationship Temperature Rate) ìƒì„¸ ê³„ì‚° ë¡œì§
        </h2>

        <div class="algorithm-flow">
          <h3>ì•Œê³ ë¦¬ì¦˜ íë¦„</h3>
          <div class="flow-step">
            <strong>1ë‹¨ê³„: Activity ì¡°íšŒ</strong>
            <p>ìµœê·¼ 30ì¼ê°„ì˜ activities í…Œì´ë¸”ì—ì„œ ì‚¬ìš©ìë³„ ë°ì´í„° ì¡°íšŒ</p>
          </div>
          <div class="flow-step">
            <strong>2ë‹¨ê³„: Sentiment Score í•„í„°ë§</strong>
            <p>sentiment_scoreê°€ nullì´ ì•„ë‹Œ Activityë§Œ í•„í„°ë§</p>
          </div>
          <div class="flow-step">
            <strong>3ë‹¨ê³„: í‰ê·  ê³„ì‚°</strong>
            <p>í•„í„°ë§ëœ Activityë“¤ì˜ sentiment_score í‰ê·  ê³„ì‚°</p>
          </div>
          <div class="flow-step">
            <strong>4ë‹¨ê³„: ì •ê·œí™”</strong>
            <p>0-100 ìŠ¤ì¼€ì¼ë¡œ ì •ê·œí™”</p>
          </div>
        </div>

        <h3 style="margin-top: 30px; color: #2d3748">ì½”ë“œ ë¡œì§</h3>
        <div class="code-block">
          <code
            >// 1. Activity ì¡°íšŒ const { data: activities } = await
            getActivities({ startDate, endDate, }); // 2. Sentiment Score í•„í„°ë§
            const activitiesWithSentiment = activities.filter( (act) =>
            act.sentiment_score !== null && act.sentiment_score !== undefined );
            // 3. í‰ê·  ê³„ì‚° const sum = activitiesWithSentiment.reduce( (acc,
            act) => acc + (act.sentiment_score || 0), 0 ); const avgSentiment =
            sum / activitiesWithSentiment.length; // 4. ì •ê·œí™” const rtrScore =
            Math.round( Math.min(100, Math.max(0, avgSentiment)) );</code
          >
        </div>

        <h3 style="margin-top: 30px; color: #2d3748">ìˆ˜í•™ì  ê³µì‹</h3>
        <div class="code-block">
          <code
            >RTR = (1/m) Ã— Î£(S_i) ì—¬ê¸°ì„œ: - m = sentiment_scoreê°€ ìˆëŠ” Activity
            ìˆ˜ - S_i = ië²ˆì§¸ Activityì˜ sentiment_score - ë²”ìœ„: 0 â‰¤ RTR â‰¤
            100</code
          >
        </div>
      </div>

      <!-- BCR ìƒì„¸ ê³„ì‚° -->
      <div class="section">
        <h2 style="color: #2d3748; margin-bottom: 20px">
          BCR (Behavior Consistency Rate) ìƒì„¸ ê³„ì‚° ë¡œì§
        </h2>

        <div class="algorithm-flow">
          <h3>ì•Œê³ ë¦¬ì¦˜ íë¦„</h3>
          <div class="flow-step">
            <strong>1ë‹¨ê³„: ë¹ˆë„ ì ìˆ˜ ê³„ì‚° (40ì  ë§Œì )</strong>
            <p>í™œë™ ì¼ìˆ˜ / ì´ ì¼ìˆ˜ Ã— 40</p>
          </div>
          <div class="flow-step">
            <strong>2ë‹¨ê³„: ê·œì¹™ì„± ì ìˆ˜ ê³„ì‚° (30ì  ë§Œì )</strong>
            <p>í™œë™ ê°„ê²©ì˜ í‘œì¤€í¸ì°¨ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê·œì¹™ì„± í‰ê°€</p>
          </div>
          <div class="flow-step">
            <strong>3ë‹¨ê³„: í’ˆì§ˆ ì¼ê´€ì„± ì ìˆ˜ ê³„ì‚° (30ì  ë§Œì )</strong>
            <p>Behavior Scoreì˜ quality_score í‘œì¤€í¸ì°¨ ê¸°ë°˜ ì ìˆ˜</p>
          </div>
          <div class="flow-step">
            <strong>4ë‹¨ê³„: ì´ì  ê³„ì‚°</strong>
            <p>ë¹ˆë„ ì ìˆ˜ + ê·œì¹™ì„± ì ìˆ˜ + í’ˆì§ˆ ì¼ê´€ì„± ì ìˆ˜</p>
          </div>
        </div>

        <h3 style="margin-top: 30px; color: #2d3748">ì½”ë“œ ë¡œì§</h3>
        <div class="code-block">
          <code
            >// 1. ë¹ˆë„ ì ìˆ˜ ê³„ì‚° const activityDates = new Set(
            activities.map((act) => { const date = new Date(act.performed_at);
            return `${date.getFullYear()}-${date.getMonth()}-${date.getDate()}`;
            }) ); const activeDays = activityDates.size; const totalDays =
            Math.ceil( (endDate.getTime() - startDate.getTime()) / (24 * 60 * 60
            * 1000) ); const frequencyScore = Math.min(40, (activeDays /
            totalDays) * 40); // 2. ê·œì¹™ì„± ì ìˆ˜ ê³„ì‚° const sortedActivities =
            [...activities].sort( (a, b) => new Date(a.performed_at).getTime() -
            new Date(b.performed_at).getTime() ); const intervals: number[] =
            []; for (let i = 1; i < sortedActivities.length; i++) { const
            prevTime = new Date(sortedActivities[i - 1].performed_at).getTime();
            const currTime = new
            Date(sortedActivities[i].performed_at).getTime(); const
            intervalHours = (currTime - prevTime) / (1000 * 60 * 60);
            intervals.push(intervalHours); } const avgInterval =
            intervals.reduce((sum, val) => sum + val, 0) / intervals.length;
            const variance = intervals.reduce( (sum, val) => sum + Math.pow(val
            - avgInterval, 2), 0 ) / intervals.length; const stdDev =
            Math.sqrt(variance); const consistencyRatio = avgInterval > 0 ?
            Math.min(1, 24 / avgInterval) : 0; const regularityRatio = stdDev >
            0 ? Math.min(1, 24 / stdDev) : 1; const consistencyScore =
            consistencyRatio * regularityRatio * 30; // 3. í’ˆì§ˆ ì¼ê´€ì„± ì ìˆ˜ ê³„ì‚°
            const behaviorScores = await getBehaviorScores({ periodStart:
            startDate, periodEnd: endDate, }); let qualityConsistencyScore = 0;
            if (behaviorScores.length > 0) { const qualityScores =
            behaviorScores.map((bs) => bs.quality_score); const avgQuality =
            qualityScores.reduce((sum, val) => sum + val, 0) /
            qualityScores.length; const qualityVariance = qualityScores.reduce(
            (sum, val) => sum + Math.pow(val - avgQuality, 2), 0 ) /
            qualityScores.length; const qualityStdDev =
            Math.sqrt(qualityVariance); qualityConsistencyScore = Math.max(0, 30
            - qualityStdDev); } // 4. ì´ì  ê³„ì‚° const bcrScore = Math.round(
            frequencyScore + consistencyScore + qualityConsistencyScore );</code
          >
        </div>

        <h3 style="margin-top: 30px; color: #2d3748">ìˆ˜í•™ì  ê³µì‹</h3>
        <div class="code-block">
          <code
            >BCR = F_score + C_score + Q_score F_score = min(40, (D_active /
            D_total) Ã— 40) ì—¬ê¸°ì„œ: - D_active = í™œë™í•œ ì¼ìˆ˜ - D_total = ì´ ì¼ìˆ˜
            C_score = (24 / I_avg) Ã— (24 / Ïƒ_I) Ã— 30 ì—¬ê¸°ì„œ: - I_avg = í‰ê·  í™œë™
            ê°„ê²© (ì‹œê°„) - Ïƒ_I = í™œë™ ê°„ê²©ì˜ í‘œì¤€í¸ì°¨ Q_score = max(0, 30 - Ïƒ_Q)
            ì—¬ê¸°ì„œ: - Ïƒ_Q = quality_scoreì˜ í‘œì¤€í¸ì°¨ ë²”ìœ„: 0 â‰¤ BCR â‰¤ 100</code
          >
        </div>
      </div>

      <!-- PHR ìƒì„¸ ê³„ì‚° -->
      <div class="section">
        <h2 style="color: #2d3748; margin-bottom: 20px">
          PHR (Proactive Health Rate) ìƒì„¸ ê³„ì‚° ë¡œì§
        </h2>

        <div class="algorithm-flow">
          <h3>ì•Œê³ ë¦¬ì¦˜ íë¦„</h3>
          <div class="flow-step">
            <strong>1ë‹¨ê³„: Activity ì¡°íšŒ</strong>
            <p>ìµœê·¼ 30ì¼ê°„ì˜ activities í…Œì´ë¸” ì¡°íšŒ</p>
          </div>
          <div class="flow-step">
            <strong>2ë‹¨ê³„: Activityë³„ ì ìˆ˜ ê³„ì‚°</strong>
            <p>next_action_dateë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê° Activityì— ì ìˆ˜ ë¶€ì—¬</p>
          </div>
          <div class="flow-step">
            <strong>3ë‹¨ê³„: í‰ê·  ê³„ì‚°</strong>
            <p>ëª¨ë“  Activity ì ìˆ˜ì˜ í‰ê·  ê³„ì‚°</p>
          </div>
        </div>

        <h3 style="margin-top: 30px; color: #2d3748">ì ìˆ˜ ê¸°ì¤€í‘œ</h3>
        <table>
          <tr>
            <th>ì¡°ê±´</th>
            <th>ì ìˆ˜</th>
            <th>ì„¤ëª…</th>
          </tr>
          <tr>
            <td>next_action_dateê°€ ì§€ë‚¨</td>
            <td>0ì </td>
            <td>Dead Lead - ì¦‰ì‹œ ì¡°ì¹˜ í•„ìš”</td>
          </tr>
          <tr>
            <td>0-7ì¼ ì´ë‚´</td>
            <td>100ì </td>
            <td>ì ê·¹ì  ê´€ë¦¬</td>
          </tr>
          <tr>
            <td>8-14ì¼</td>
            <td>80ì </td>
            <td>ì–‘í˜¸í•œ ê´€ë¦¬</td>
          </tr>
          <tr>
            <td>15-30ì¼</td>
            <td>60ì </td>
            <td>ë³´í†µ ê´€ë¦¬</td>
          </tr>
          <tr>
            <td>30ì¼ ì´ìƒ</td>
            <td>40ì </td>
            <td>ê´€ë¦¬ ë¶€ì¡±</td>
          </tr>
          <tr>
            <td>next_action_date ì—†ìŒ</td>
            <td>0ì </td>
            <td>ê³„íš ì—†ìŒ</td>
          </tr>
        </table>

        <h3 style="margin-top: 30px; color: #2d3748">ì½”ë“œ ë¡œì§</h3>
        <div class="code-block">
          <code
            >const now = new Date(); let totalScore = 0; let validActivities =
            0; for (const activity of activities) { if
            (!activity.next_action_date) { totalScore += 0; validActivities++;
            continue; } validActivities++; const nextActionDate = new
            Date(activity.next_action_date); const daysUntilNextAction =
            Math.ceil( (nextActionDate.getTime() - now.getTime()) / (24 * 60 *
            60 * 1000) ); let activityScore = 0; if (daysUntilNextAction < 0) {
            activityScore = 0; // Dead Lead } else if (daysUntilNextAction <= 7)
            { activityScore = 100; } else if (daysUntilNextAction <= 14) {
            activityScore = 80; } else if (daysUntilNextAction <= 30) {
            activityScore = 60; } else { activityScore = 40; } totalScore +=
            activityScore; } const avgScore = totalScore / validActivities;
            const phrScore = Math.round(Math.min(100, Math.max(0,
            avgScore)));</code
          >
        </div>

        <h3 style="margin-top: 30px; color: #2d3748">ìˆ˜í•™ì  ê³µì‹</h3>
        <div class="code-block">
          <code
            >PHR = (1/n) Ã— Î£(Score_i) Score_i = f(days_until_next_action)
            ì—¬ê¸°ì„œ: - n = Activity ìˆ˜ - days_until_next_action = ë‹¤ìŒ í™œë™ê¹Œì§€
            ë‚¨ì€ ì¼ìˆ˜ - f(x) = ì ìˆ˜ í•¨ìˆ˜: * x < 0: 0 * 0 â‰¤ x â‰¤ 7: 100 * 8 â‰¤ x â‰¤
            14: 80 * 15 â‰¤ x â‰¤ 30: 60 * x > 30: 40 ë²”ìœ„: 0 â‰¤ PHR â‰¤ 100</code
          >
        </div>
      </div>

      <!-- Field Growth Rate ìƒì„¸ ê³„ì‚° -->
      <div class="section">
        <h2 style="color: #2d3748; margin-bottom: 20px">
          í•„ë“œ ì„±ì¥ë¥  (Field Growth Rate) ìƒì„¸ ê³„ì‚° ë¡œì§
        </h2>

        <h3 style="margin-top: 30px; color: #2d3748">ì½”ë“œ ë¡œì§</h3>
        <div class="code-block">
          <code
            >// í˜„ì¬ ê¸°ê°„ì˜ ì²˜ë°©ëŸ‰ê³¼ ë§¤ì¶œ ì¡°íšŒ const currentMetrics = await
            getPrescriptionMetrics( periodStart, periodEnd, accountId ); // ë¹„êµ
            ê¸°ê°„ ê³„ì‚° const comparisonPeriod = input.comparisonPeriod ||
            'previous_month'; const { start: compStart, end: compEnd } =
            calculateComparisonPeriod( periodStart, periodEnd, comparisonPeriod
            ); // ë¹„êµ ê¸°ê°„ì˜ ì²˜ë°©ëŸ‰ê³¼ ë§¤ì¶œ ì¡°íšŒ const comparisonMetrics = await
            getPrescriptionMetrics( compStart, compEnd, accountId ); // ì„±ì¥ë¥ 
            ê³„ì‚° let quantityGrowthRate = 0; if (comparisonMetrics.totalQuantity
            > 0) { quantityGrowthRate = ((currentMetrics.totalQuantity -
            comparisonMetrics.totalQuantity) / comparisonMetrics.totalQuantity)
            * 100; } else if (currentMetrics.totalQuantity > 0) {
            quantityGrowthRate = 100; // ë¹„êµ ê¸°ê°„ì´ 0ì´ì§€ë§Œ í˜„ì¬ ê¸°ê°„ì— ì²˜ë°©ì´
            ìˆìœ¼ë©´ 100% ì¦ê°€ } let revenueGrowthRate = 0; if
            (comparisonMetrics.totalRevenue > 0) { revenueGrowthRate =
            ((currentMetrics.totalRevenue - comparisonMetrics.totalRevenue) /
            comparisonMetrics.totalRevenue) * 100; } else if
            (currentMetrics.totalRevenue > 0) { revenueGrowthRate = 100; } //
            ê°€ì¤‘ í‰ê·  (ì²˜ë°©ëŸ‰ 60%, ë§¤ì¶œ 40%) const fieldGrowthRate =
            quantityGrowthRate * 0.6 + revenueGrowthRate * 0.4;</code
          >
        </div>

        <h3 style="margin-top: 30px; color: #2d3748">ìˆ˜í•™ì  ê³µì‹</h3>
        <div class="code-block">
          <code
            >Field Growth Rate = (Q_growth Ã— 0.6) + (R_growth Ã— 0.4) Q_growth =
            ((Q_current - Q_prev) / Q_prev) Ã— 100% R_growth = ((R_current -
            R_prev) / R_prev) Ã— 100% ì—¬ê¸°ì„œ: - Q_current = í˜„ì¬ ê¸°ê°„ ì²˜ë°©ëŸ‰ -
            Q_prev = ë¹„êµ ê¸°ê°„ ì²˜ë°©ëŸ‰ - R_current = í˜„ì¬ ê¸°ê°„ ë§¤ì¶œ - R_prev =
            ë¹„êµ ê¸°ê°„ ë§¤ì¶œ ë²”ìœ„: -100% ~ +âˆ</code
          >
        </div>
      </div>

      <!-- Prescription Index ìƒì„¸ ê³„ì‚° -->
      <div class="section">
        <h2 style="color: #2d3748; margin-bottom: 20px">
          ì²˜ë°© ê¸°ë°˜ ì„±ê³¼ì§€ìˆ˜ (Prescription Index) ìƒì„¸ ê³„ì‚° ë¡œì§
        </h2>

        <h3 style="margin-top: 30px; color: #2d3748">ì½”ë“œ ë¡œì§</h3>
        <div class="code-block">
          <code
            >// ê°€ì¤‘ ì²˜ë°©ëŸ‰ ê³„ì‚° let weightedQuantity = 0; let totalQuantity =
            0; for (const prescription of prescriptions) { // ë³‘ì› íƒ€ì…ë³„ ê°€ì¤‘ì¹˜
            const account = await getAccount(prescription.account_id); const
            accountWeight = account ? getAccountTypeWeight(account.type) : 1.0;
            // ê°€ê²© ê°€ì¤‘ì¹˜ const priceWeight = prescription.price > 0 ?
            Math.log10(prescription.price + 1) / 10 : 1.0; // ìµœì¢… ê°€ì¤‘ì¹˜ const
            finalWeight = accountWeight * priceWeight; weightedQuantity +=
            prescription.quantity * finalWeight; totalQuantity +=
            prescription.quantity; } // ì²˜ë°©ëŸ‰ ì¦ê°€ìœ¨ ê³„ì‚° const
            previousTotalQuantity = previousPrescriptions.reduce( (sum, p) =>
            sum + p.quantity, 0 ); let growthRate = 0; if (previousTotalQuantity
            > 0) { growthRate = ((totalQuantity - previousTotalQuantity) /
            previousTotalQuantity) * 100; } else if (totalQuantity > 0) {
            growthRate = 100; } // ì •ê·œí™” const avgPrescriptionQuantity =
            totalQuantity / prescriptions.length; const maxExpectedQuantity =
            avgPrescriptionQuantity * 2 * prescriptions.length; const
            normalizedWeightedQuantity = maxExpectedQuantity > 0 ? Math.min(100,
            (weightedQuantity / maxExpectedQuantity) * 100) : 0; const
            normalizedGrowthRate = Math.min(100, Math.max(0, growthRate + 50));
            // ìµœì¢… ì„±ê³¼ì§€ìˆ˜ const prescriptionIndex =
            normalizedWeightedQuantity * 0.7 + normalizedGrowthRate * 0.3;</code
          >
        </div>

        <h3 style="margin-top: 30px; color: #2d3748">ìˆ˜í•™ì  ê³µì‹</h3>
        <div class="code-block">
          <code
            >Prescription Index = (W_score Ã— 0.7) + (G_score Ã— 0.3) W_score =
            min(100, (W_qty / W_max) Ã— 100) W_qty = Î£(q_i Ã— w_account Ã— w_price)
            ì—¬ê¸°ì„œ: - q_i = ië²ˆì§¸ ì²˜ë°©ì˜ quantity - w_account = ë³‘ì› íƒ€ì… ê°€ì¤‘ì¹˜
            (ì¢…í•©ë³‘ì›: 1.5, ë³‘ì›: 1.2, ì˜ì›: 1.0, ì•½êµ­: 0.8) - w_price =
            log10(price + 1) / 10 - W_max = ì˜ˆìƒ ìµœëŒ€ ê°€ì¤‘ ì²˜ë°©ëŸ‰ G_score =
            min(100, max(0, growth_rate + 50)) ì—¬ê¸°ì„œ: - growth_rate =
            ((Q_current - Q_prev) / Q_prev) Ã— 100% ë²”ìœ„: 0 â‰¤ Prescription Index
            â‰¤ 100</code
          >
        </div>
      </div>

      <div
        style="
          text-align: center;
          margin-top: 50px;
          padding-top: 30px;
          border-top: 2px solid #e2e8f0;
        "
      >
        <a href="index.html" class="back-link">â† ëª©ì°¨ë¡œ ëŒì•„ê°€ê¸°</a>
      </div>
    </div>
  </body>
</html>
